{% extends "base.html" %}

{% block title %}Login{% endblock %}

{% block content %}
{% include "members/nav.html" %}
<section class="section">
    <div class="columns">
        <div class="column is-one-third is-offset-4 box">
            {% include "messages.html" %}
            <form method="post">
                {{form.hidden_tag()}}
                <div class="field">
                    <label class="label">{{form.pid.label}}</label>
                    <div class="control">
                        {{form.pid(class="input")}}
                    </div>
                </div>
                <div class="field">
                    <label class="label">{{form.telephone.label}}</label>
                    <div class="control">
                        {{form.telephone(class="input")}}
                    </div>
                    <p class="help is-info">กรุณากรอกเฉพาะหมายเลข เช่น 09099045xx</p>
                </div>
                <div class="field">
                    <button type="button" class="button is-link"
                            hx-get="{{url_for('member.get_login_otp')}}"
                            hx-sync="closest form:drop"
                            hx-include="#telephone, #pid"
                            hx-target="#otp-message">
                        ขอรหัส OTP
                    </button>
                </div>
                <div class="field">
                    <label class="label">{{form.otp.label}}</label>
                    <div class="control">
                        {{form.otp(class="input")}}
                    </div>
                    <p class="help is-info" id="otp-message">กรุณาคลิกขอรหัส OTP เพื่อใช้ในการยืนยันตัวตน</p>
                </div>
                <div class="field">
                    <div class="control">
                        <input type="submit" value="Log In" class="button is-primary">
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}