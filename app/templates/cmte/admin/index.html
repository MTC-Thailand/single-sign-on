{% extends "base.html" %}

{% block content %}
{% include "cmte/admin_nav.html" %}
<section class="section">
    <div class="container">
        {% include "messages.html" %}
        <div class="columns">
            <div class="column">
                <h1 class="title is-size-4">รายการกิจกรรมรออนุมัติคะแนน</h1>
                <table class="table is-fullwidth">
                    <thead>
                    <th>ชื่อกิจกรรม</th>
                    <th>สถาบัน</th>
                    <th>วันที่ยื่นรายชื่อ</th>
                    <th>รออนุมัติ</th>
                    </thead>
                    {% for idx, row in pending_participants.iterrows() %}
                    <tr>
                        <td>{{row.title}}</td>
                        <td>{{row.sponsor}}</td>
                        <td>{{row.participant_updated_at|localdatetime}}</td>
                        <td>
                            <a href="{{url_for('cmte.admin_preview_event', event_id=row.event_id)}}">
                              <span class="tag is-rounded is-danger">
                                {{row.number}}
                              </span>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
            <div class="column">
                <article class="panel is-info">
                    <p class="panel-heading">สถาบันฝึกอบรม</p>
                    <a class="panel-block" href="{{url_for('cmte.all_requests', tab='new')}}">
                        <span class="panel-icon">
                            <i class="fas fa-university"></i>
                        </span>
                        ขอขึ้นทะเบียน /ต่ออายุสถาบัน
                        <span class="tag is-success is-rounded">{{pending_requests or 0}}</span>
                    </a>
                    <a class="panel-block" href="{{url_for('cmte.all_sponsors')}}">
                        <span class="panel-icon">
                            <i class="fas fa-university"></i>
                        </span>
                        ข้อมูลสถาบัน
                    </a>
                    <a class="panel-block" href="{{url_for('cmte.admin_list_sponsor_members')}}">
                        <span class="panel-icon">
                            <i class="fa-solid fa-users"></i>
                        </span>
                        ข้อมูลผู้ประสานงานสถาบัน
                    </a>
                </article>
                <article class="panel is-info">
                    <p class="panel-heading">กิจกรรม</p>
                    <a class="panel-block" href="{{url_for('cmte.admin_pending_events')}}">
                        <span class="panel-icon">
                            <i class="fas fa-hourglass-half"></i>
                        </span>
                        อนุมัติกิจกรรม
                        <span class="tag is-success is-rounded">{{pending_events or 0}}</span>
                    </a>
                    <a class="panel-block" href="{{url_for('cmte.admin_individual_score_index')}}">
                        <span class="panel-icon">
                            <i class="fas fa-user-clock"></i>
                        </span>
                        อนุมัติคะแนนส่วนบุคคล
                        <span class="tag is-success is-rounded">{{pending_individual_records or 0}}</span>
                    </a>
                </article>
                <article class="panel is-info">
                    <p class="panel-heading">สมาชิก</p>
                    <a class="panel-block" href="{{url_for('cmte.admin_edit_fee_payment_record')}}">
                        <span class="panel-icon">
                            <i class="fas fa-user-tag"></i>
                        </span>
                        รายการชำระค่าธรรมเนียมกิจกรรมรายบุคคล
                        <span class="tag is-success is-rounded">{{pending_payments or 0}}</span>
                    </a>
                    <a class="panel-block" href="{{url_for('cmte.admin_search_members')}}">
                        <span class="panel-icon">
                            <i class="fas fa-user"></i>
                        </span>
                        ตรวจสอบคะแนนสมาชิก
                    </a>
                </article>
                <article class="panel is-info">
                    <p class="panel-heading">ตั้งค่า</p>
                    <a class="panel-block" href="{{url_for('cmte.admin_event_edit')}}">
                        <span class="panel-icon">
                            <i class="fas fa-plus"></i>
                        </span>
                        เพิ่มกิจกรรม
                    </a>
                    <a class="panel-block" href="{{url_for('cmte.admin_manage_events')}}">
                        <span class="panel-icon">
                            <i class="fas fa-cog"></i>
                        </span>
                        จัดการประเภทและชนิดกิจกรรม
                    </a>
                </article>
            </div>
        </div>
    </div>
</section>
{% endblock %}